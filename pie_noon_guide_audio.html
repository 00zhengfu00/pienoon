<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Pie Noon: Audio</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Pie Noon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pie_noon_guide_gameplay.html"><span>Gameplay</span></a></li>
      <li><a href="pie_noon_guide_overview.html"><span>Programmer's&#160;Guide</span></a></li>
      <li><a href="pie_noon_readme.html"><span>Readme</span></a></li>
      <li><a href="contributing.html"><span>Contributing</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('pie_noon_guide_audio.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Audio </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="pie_noon_guide_audio_overview"></a>
Overview</h1>
<p>The audio engine manages playing both sounds and music. It is largely data-driven. In a config file, settings such as the number of output channels and the buffer size can be adjusted. The audio engine will manage these channels, ensuring that if this limit is exceeded only the lowest priority sounds are dropped.</p>
<h1><a class="anchor" id="pie_noon_guide_audio_sound_collections"></a>
Sound Collections</h1>
<p>Individual sounds are represented by <code>SoundSource</code> objects. A <code>SoundSource</code> is not played directly though. <code>SoundSource</code>s are gathered into a class called <code>SoundCollection</code> which represents a collection of related sounds. For example, in Pie Noon there are many different sounds for a pie hitting a character to avoid the monotony of every hit sounding the same.</p>
<p>Each <code>SoundCollection</code> has a unique integer identifier. To play a given <code>SoundCollection</code>, its identifier is passed to <code>AudioEngine::PlaySound</code>.</p>
<h1><a class="anchor" id="pie_noon_guide_audio_buses"></a>
Buses</h1>
<p>The main purpose of a bus is to adjust the gain (or volume) of a group of sounds in tandem. Any number of buses may be defined.</p>
<p>All <code>SoundCollection</code>s define which bus they are to be played on. Examples buses might be 'music', 'ambient_sound', 'sound_effects'. A bus may list other buses as 'child_buses', which means that all changes to that bus's gain level affect all children of that bus as well. There is always a single 'master' bus, which is the root bus which all other buses decend from. A bus may also define 'duck_buses', which are buses that will lower in volume when a sound is played on that bus. For example, a designer might want to have background sound effects and music lower in volume when an important dialog is playing. To do this the sound effect and music buses would be added to the 'duck_buses' list in the dialog bus.</p>
<h1><a class="anchor" id="pie_noon_guide_audio_configuration"></a>
Configuration</h1>
<p>The following configuration files control the behavior of the audio engine.</p>
<table class="doxtable">
<tr>
<th>JSON File(s) </th><th>Flatbuffers Schema  </th></tr>
<tr>
<td><code>config.json</code> </td><td><code>audio_config.fbs</code> (included in <code>config.fbs</code>) </td></tr>
<tr>
<td><code>buses.json</code> </td><td><code>buses.fbs</code> </td></tr>
<tr>
<td><code>sound_assets.json</code> </td><td><code>sound_assets.fbs</code> </td></tr>
<tr>
<td><code>sounds/*.json</code> </td><td><code>sound_collection_def.fbs</code> </td></tr>
</table>
<ul>
<li><p class="startli"><code>audio_config.fbs</code></p>
<p class="startli">The main configuration schema for the audio engine is defined in audio_config.fbs and it is populated in config.json. This controls the settings of the audio engine itself, like the number of output channels and the sample rate.</p>
</li>
<li><p class="startli"><code>buses.fbs</code></p>
<p class="startli">The list of all bus definitions is defined in buses.fbs and populated in buses.json.</p>
</li>
<li><p class="startli"><code>sound_collection_def.fbs</code></p>
<p class="startli">The <code>SoundCollection</code> schema is defined in <code>sound_collection_def.fbs.</code> Individual <code>SoundCollectionDef</code>s are defined in the <code>sounds/</code> subdirectory, one SoundCollectionDef per file.</p>
</li>
<li><p class="startli"><code>sound_assets.fbs</code></p>
<p class="startli">Another file, sounds_assets.json, is used to load these individual <code>SoundCollection</code>s. Filenames listed in this JSON file will be loaded in order. The index of a sound collection in this file represents the unique identifier used to play a that sound collection. E.g., the first sound sound collection listed would be played by calling <code>audio_engine.PlaySound(0)</code>. </p>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-46159502-1', 'google.github.io');
ga('send', 'pageview');
</script>
</body>
</html>
